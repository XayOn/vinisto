<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <script src="https://unpkg.com/vue@2.2.6"></script>
        <script src="https://cdn.jsdelivr.net/vue.resource/1.2.1/vue-resource.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/languages/gherkin.min.js"></script>
    </head>
    <body>
        <button onclick="update_features()">Update features</button>
        <div id="features">
            <textarea style="width: 100%; border: 0px;" v-for="item in features"> {{ item.text }} </textarea>
        </div>
        <div id="sensors"></div>
        <script>
            window.data = {"features": [], "sensors": []};
            function update_features(){
                function h(e) {$(e).css({'height':'auto','overflow-y':'hidden'}).height(e.scrollHeight);}
                Vue.http.get('/feature').then(response => {window.data["features"] = response.body;});
                window.setTimeout(function(){$('textarea').each(function () {h(this);}).on('input', function () {h(this);})}, 500);
            }
            update_features();
            new Vue({el: "#features", data: window.data});
            new Vue({el: "#sensors", data: window.data});
        </script>
    </body>
</html>

