<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <script src="https://unpkg.com/vue@2.2.6"></script>
        <script src="https://cdn.jsdelivr.net/vue.resource/1.2.1/vue-resource.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-throttle-debounce/1.1/jquery.ba-throttle-debounce.min.js"></script>
        <style> textarea{ width: 100%; border: 0px!important; border-bottom:1px solid lightgrey!important; height:auto; overflow-y:hidden; } </style>
        <link rel="stylesheet" href="https://bootswatch.com/sandstone/bootstrap.min.css" />
    </head>
    <body>
        <div class=container>
             <div id="sensors">
                <h2>Vinisto</h2>
                <h1 style="position:absolute; top:0px; right:10px"><a href="/static/configuration.html">&#x2699;</a></h1>
                <div class="form-control" v-on:keyUp="update_sensor"
                          v-model="item.value"
                          v-model.lazy="item.value"
                          v-bind:data-uri="item.$uri"
                          v-for="item in sensors">{{item.name}} - {{ item.value }}</div>
             </div>
        </div>

        <script>
            window.data = {"sensors": []};

            new Vue({el: "#sensors", data: window.data,
                created: function(){
                    this.update_sensors();
                },
                methods: {
                    update_sensor: function(ev){
                        Vue.http.patch(ev.target.dataset.uri, {"value": ev.target.value});
                    },
                    update_sensors: function(){
                        Vue.http.get('/sensor').then(
                            response => {window.data["sensors"] = response.body;});
                    }
                }
            });
        </script>
    </body>
</html>
